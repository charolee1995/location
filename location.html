<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>GPS + Webhook æ¸¬è©¦</title>
</head>
<body>
  <h3>GPS + Tines æ¸¬è©¦é é¢</h3>
  <p id="status">ç­‰å¾…å®šä½ä¸­...</p>

  <script>
    const status = document.getElementById('status');

    if (!navigator.geolocation) {
      status.innerText = "âš ï¸ ä½ çš„ç€è¦½å™¨ä¸æ”¯æ´å®šä½";
    } else {
      navigator.geolocation.getCurrentPosition(
        pos => {
          const lat = pos.coords.latitude;
          const lon = pos.coords.longitude;

          // é¡¯ç¤ºåœ¨é é¢
          status.innerText = `âœ… å®šä½æˆåŠŸ\nç·¯åº¦: ${lat}\nç¶“åº¦: ${lon}`;

          // å‚³é€åˆ° Tines Webhook
          fetch("https://snowy-grass-5288.tines.com/webhook/hello-world/7ca9f7ff1ee6f3715eeb80a706372092", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({
              latitude: lat,
              longitude: lon,
              timestamp: new Date().toISOString()
            })
          })
          .then(res => {
            if (res.ok) {
              console.log("ğŸ“¡ å·²æˆåŠŸé€åˆ° Tinesï¼");
            } else {
              console.error("âŒ ç™¼é€å¤±æ•—ï¼š", res.status, res.statusText);
            }
          })
          .catch(err => console.error("âŒ ç™¼é€éŒ¯èª¤ï¼š", err));
        },
        err => {
          status.innerText = `âŒ å®šä½å¤±æ•—ï¼š${err.message}`;
        },
        { enableHighAccuracy: true, timeout: 10000, maximumAge: 0 }
      );
    }
  </script>
</body>
</html>




